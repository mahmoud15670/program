{% extends 'homs/layout.html' %}
{% load static %}
{% block body %}
<header><img src="{% static 'head.jpg' %}" alt="head img"></header>
<table id="head">
    <tr>
        <th>Name:</th>
        <td>{{result.patient.name}}</td>
        <th>Patient Id:</th>
        <td>{{result.patient.patient_id}}</td>
    </tr>
    <tr>
        <th>Age / Sex:</th>
        <td>{{result.patient.age}} {{result.patient.date}} / {{result.patient.gender}}</td>
        <th>Request Date:</th>
        <td>{{result.patient.entry}}</td>
    </tr>
    <tr>
        <th>Referred By:</th>
        <td>{{result.patient.dr}}</td>
        <th>Print Date:</th>
        <td id='print_date'>{{result.patient.dr}}</td>
    </tr>
    <tr>
    </tr>
</table>
<hr>
<h2>Report</h2>
<table >
    <tr>
        <th>Test Name</th>
        <th>Result</th>
        <th>Reference Range</th>
    </tr>
    <tr>
        <th>{{result.test.name}}</th>
        <td>{{result.result}}</td>
        <td>{{result.ref}}</td>
    </tr>
</table>
<a href="javascript:report()">Print</a>
<footer><img src="{% static 'tail.jpg' %}" alt="tail img"></footer>
<script>
    function report() {
        const print_date = document.querySelector('#print_date');
        var now = new Date()
        var day = now.toISOString().split('T')[0]
        var time = now.toISOString().split('T')[1].split('.')[0]
        print_date.innerHTML = day+' '+time
        window.print()
    }
</script>
<style>
    header, footer {
        display: none;
        width: 100%;
    }
    table {
        width: -webkit-fill-available;
    }
    
    @media print {
        hr {
            height: 2px;
            border: solid black 1px;
            background-color: rgb(189, 188, 188);
            border-radius: 5px;
        }
        header {
            display: block;
        }
        footer{
            position: absolute;
            display: block;
            bottom: 0;
        } 
        img {
            height: 137px;
            width: 100%;
        }
        a {
            display: none;
        }
        * {
            text-align: center;
        }
        #head td {
            border: solid black 1px;
        }
    }
</style>
{% endblock %}